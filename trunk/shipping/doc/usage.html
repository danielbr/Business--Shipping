<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Business::Shipping - API for shipping-related tasks</title>
<link rev="made" href="mailto:db@kavod1.kavod.com" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#abstract">ABSTRACT</a></li>
	<ul>

		<li><a href="#shipping_tasks_implemented_at_this_time">Shipping Tasks Implemented at this time</a></li>
		<li><a href="#shipping_vendors_implemented_at_this_time">Shipping Vendors Implemented at this time</a></li>
	</ul>

	<li><a href="#required_modules">REQUIRED MODULES</a></li>
	<li><a href="#multipackage_api">MULTI-PACKAGE API</a></li>
	<ul>

		<li><a href="#online__ups_example">Online::UPS Example</a></li>
	</ul>

	<li><a href="#error_debug_handling">ERROR/DEBUG HANDLING</a></li>
	<li><a href="#class_methods">CLASS METHODS</a></li>
	<ul>

		<li><a href="#rate_request__"><code>rate_request()</code></a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright_and_licence">COPYRIGHT AND LICENCE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Business::Shipping - API for shipping-related tasks</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Example rate request:</p>
<pre>
        use Business::Shipping;
        
        my $rate_request = Business::Shipping-&gt;rate_request(
                shipper         =&gt; 'Offline::UPS',
                service         =&gt; 'GNDRES',
                from_zip        =&gt; '98682',
                to_zip          =&gt; '98270',
                weight          =&gt;  5.00,
        );      
        
        $rate_request-&gt;submit() or die $rate_request-&gt;error();
        
        print $rate_request-&gt;total_charges();</pre>
<p>
</p>
<hr />
<h1><a name="abstract">ABSTRACT</a></h1>
<p>Business::Shipping is an API for shipping-related tasks.</p>
<p>
</p>
<h2><a name="shipping_tasks_implemented_at_this_time">Shipping Tasks Implemented at this time</a></h2>
<pre>
 * Shipping cost calculation
 * Tracking, availability, and other services are planned for future addition.</pre>
<p>
</p>
<h2><a name="shipping_vendors_implemented_at_this_time">Shipping Vendors Implemented at this time</a></h2>
<pre>
 * Online UPS (using the Internet and UPS servers)
 * Offline UPS (using tables stored locally)
 * Online USPS</pre>
<p>Offline FedEX and USPS are planned for support in the future.</p>
<p>
</p>
<hr />
<h1><a name="required_modules">REQUIRED MODULES</a></h1>
<pre>
 Archive::Zip (any)
 Bundle::DBD::CSV (any)
 Cache::FileCache (any)
 Class::MethodMaker (any)
 Config::IniFiles (any)
 Crypt::SSLeay (any)
 Data::Dumper (any)
 Devel::Required (0.03)
 Error (any)
 Getopt::Mixed (any)
 LWP::UserAgent (any)
 Math::BaseCnv (any)
 Scalar::Util (1.10)
 XML::DOM (any)
 XML::Simple (2.05)</pre>
<p>
</p>
<hr />
<h1><a name="multipackage_api">MULTI-PACKAGE API</a></h1>
<p>
</p>
<h2><a name="online__ups_example">Online::UPS Example</a></h2>
<pre>
 use Business::Shipping;
 use Business::Shipping::Shipment::UPS;
 
 my $shipment = Business::Shipping::Shipment::UPS-&gt;new();
 
 $shipment-&gt;init(
        from_zip        =&gt; '98682',
        to_zip          =&gt; '98270',
        service         =&gt; 'GNDRES',
        #
        # user_id, etc. needed here.
        #
 );</pre>
<pre>
 $shipment-&gt;add_package(
        id              =&gt; '0',
        weight          =&gt; 5,
 );</pre>
<pre>
 $shipment-&gt;add_package(
        id              =&gt; '1',
        weight          =&gt; 3,
 );
 
 my $rate_request = Business::Shipping::rate_request( shipper =&gt; 'Online::UPS' );
 #
 # Add the shipment to the rate request.
 #
 $rate_request-&gt;shipment( $shipment );
 $rate_request-&gt;submit() or ie $rate_request-&gt;error();</pre>
<pre>
 print $rate_request-&gt;package('0')-&gt;get_charges( 'GNDRES' );
 print $rate_request-&gt;package('1')-&gt;get_charges( 'GNDRES' );
 print $rate_request-&gt;get_total_price( 'GNDRES' );</pre>
<p>
</p>
<hr />
<h1><a name="error_debug_handling">ERROR/DEBUG HANDLING</a></h1>
<p>The 'event_handlers' argument takes a hashref telling Business::Shipping what to do
for error, debug, trace, and the like.  The value can be one of four options:</p>
<pre>
 * 'STDERR'
 * 'STDOUT'
 * 'carp'
 * 'croak'</pre>
<p>For example:</p>
<pre>
 $rate_request-&gt;event_handlers(
        { 
                'error' =&gt; 'STDERR',
                'debug' =&gt; 'STDERR',
                'trace' =&gt; undef,
                'debug3' =&gt; undef,
        }
 );
 
The default is 'STDERR' for error handling, and nothing for debug/trace 
handling.  The option 'debug3' adds additional debugging messages that are not 
included in the normal 'debug'.  Note that you can still access error messages
even without an 'error' handler, by accessing the return values of methods.  For 
example:</pre>
<pre>
 $rate_request-&gt;init( %values ) or print $rate_request-&gt;error();
        
However, if you don't save the error value before the next call, it could be
overwritten by a new error.</pre>
<p>
</p>
<hr />
<h1><a name="class_methods">CLASS METHODS</a></h1>
<p>
</p>
<h2><a name="rate_request__"><code>rate_request()</code></a></h2>
<p>This method is used to request shipping rate information from online providers
or offline tables.  A hash is accepted as input with the following key values:</p>
<ul>
<li><strong><a name="item_shipper">shipper</a></strong><br />
</li>
The name of the shipper to use. Must correspond to a module by the name of:
<code>Business::Shipping::RateRequest::SHIPPER</code>.  For example, <code>Offline::UPS</code>.
<p></p>
<li><strong><a name="item_user_id">user_id</a></strong><br />
</li>
A user_id, if required by the provider. Online::USPS and Online::UPS require
this, while Offline::UPS does not.
<p></p>
<li><strong><a name="item_password">password</a></strong><br />
</li>
A password,  if required by the provider. Online::USPS and Online::UPS require
this, while Offline::UPS does not.
<p></p>
<li><strong><a name="item_service">service</a></strong><br />
</li>
A valid service name for the provider. See the corresponding module 
documentation for a list of services compatible with the shipper.
<p></p>
<li><strong><a name="item_from_zip">from_zip</a></strong><br />
</li>
The origin zipcode.
<p></p>
<li><strong><a name="item_from_state">from_state</a></strong><br />
</li>
The origin state.  Required for Offline::UPS.
<p></p>
<li><strong><a name="item_to_zip">to_zip</a></strong><br />
</li>
The destination zipcode.
<p></p>
<li><strong><a name="item_to_country">to_country</a></strong><br />
</li>
The destination country.  Required for international shipments only.
<p></p>
<li><strong><a name="item_weight">weight</a></strong><br />
</li>
Weight of the shipment, in pounds, as a decimal number.
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<pre>
 Dan Browning         &lt;db@kavod.com&gt;
 Kavod Technologies   <a href="http://www.kavod.com">http://www.kavod.com</a>

</pre>
<p>
</p>
<hr />
<h1><a name="copyright_and_licence">COPYRIGHT AND LICENCE</a></h1>
<p>Copyright (c) 2003-2004 Kavod Technologies, Dan Browning. All rights reserved. 
Licensed under the GNU Public Licnese (GPL).  See COPYING for more info.

</p>

</body>

</html>
